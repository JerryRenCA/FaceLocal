import{r as l,a as L}from"./react-728330cd.js";import{u as w,c as P,L as I,a as T,b as g,e as j,d as z,f as H,g as R,w as S}from"./@react-leaflet-ff7df424.js";import{l as d}from"./leaflet-08cdb987.js";import"./react-dom-1caf2c99.js";function h(){return w().map}function Z(t){const n=h();return l.useEffect(function(){return n.on(t),function(){n.off(t)}},[n,t]),n}function m(){return m=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},m.apply(this,arguments)}function x({bounds:t,boundsOptions:n,center:e,children:a,className:u,id:y,placeholder:i,style:s,whenReady:f,zoom:r,...c},v){const[M]=l.useState({className:u,id:y,style:s}),[o,b]=l.useState(null);l.useImperativeHandle(v,()=>(o==null?void 0:o.map)??null,[o]);const E=l.useCallback(C=>{if(C!==null&&o===null){const p=new d.Map(C,c);e!=null&&r!=null?p.setView(e,r):t!=null&&p.fitBounds(t,n),f!=null&&p.whenReady(f),b(P(p))}},[]);l.useEffect(()=>()=>{o==null||o.map.remove()},[o]);const O=o?L.createElement(I,{value:o},a):i??null;return L.createElement("div",m({},M,{ref:E}),O)}const _=l.forwardRef(x),q=T(function({position:n,...e},a){const u=new d.Marker(n,e);return g(u,j(a,{overlayContainer:u}))},function(n,e,a){e.position!==a.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==a.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==a.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==a.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==a.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),A=z(function(n,e){const a=new d.Popup(n,e.overlayContainer);return g(a,e)},function(n,e,{position:a},u){l.useEffect(function(){const{instance:i}=n;function s(r){r.popup===i&&(i.update(),u(!0))}function f(r){r.popup===i&&u(!1)}return e.map.on({popupopen:s,popupclose:f}),e.overlayContainer==null?(a!=null&&i.setLatLng(a),i.openOn(e.map)):e.overlayContainer.bindPopup(i),function(){var c;e.map.off({popupopen:s,popupclose:f}),(c=e.overlayContainer)==null||c.unbindPopup(),e.map.removeLayer(i)}},[n,e,u,a])}),D=H(function({url:n,...e},a){const u=new d.TileLayer(n,S(e,a));return g(u,a)},function(n,e,a){R(n,e,a);const{url:u}=e;u!=null&&u!==a.url&&n.setUrl(u)});export{_ as M,A as P,D as T,q as a,Z as u};
