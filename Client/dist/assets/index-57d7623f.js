import{j as e,c as a,d as $e,B as y,F as Ie,f as Ae,g as be,h as Me,A as ye,i as Ue,I as z,k as _e,T as I,l as Re,m as we,n as Z,o as Oe,p as Be,q as G,r as We,M as Ve,t as h,u as V,v as P,w as je,x as Se,y as qe,z as He,D as Je,E as _,G as Ke,H as Ye,J as Ze,K as Xe,L as Ge,N as R,O as he,P as Qe,Q as De,R as et,U as tt,s as rt,V as at,W as it,X as lt,Y as nt,Z as st,_ as me,$ as T,a0 as ot,a1 as dt,a2 as ct,a3 as ut,C as ht,a4 as mt,a5 as pt,a6 as ft,a7 as gt,a8 as vt,a9 as xt,aa as Q}from"./@mui-f7a756da.js";import{u as Ce,S as bt}from"./notistack-69dda909.js";import{r as c,a as S}from"./react-728330cd.js";import{c as yt}from"./react-dom-1caf2c99.js";import{L as C,B as wt}from"./react-router-dom-ddb5f63e.js";import{F as d}from"./tailwind-styled-components-0ba88b5d.js";import{i as St,g as Ct,a as Nt,b as Et,o as Pt,A as D,K as kt,u as Lt,s as zt,O as Ft,c as Tt,d as pe,U as $t,E as It,e as At,f as Mt,h as Ut,j as _t}from"./@firebase-e209bb97.js";import"./firebase-7bc2fc54.js";import{l as fe}from"./leaflet-08cdb987.js";import{M as Ne,T as Ee,u as Rt,a as ee,P as te}from"./react-leaflet-09ee73f6.js";import{P as Ot,b as Bt,a as Wt}from"./material-ui-popup-state-8eea7553.js";import{n as Vt}from"./@emotion-fe3977d9.js";import{g as ge,a as g,f as E,b as jt,d as qt}from"./date-fns-943e1535.js";import{v as j}from"./validator-baf863ef.js";import{a as re,d as Ht,e as w}from"./react-router-a89ba10b.js";import"./react-is-1aacdabe.js";import"./@babel-8760ff86.js";import"./react-transition-group-d522d3d2.js";import"./clsx-1229b3e0.js";import"./@popperjs-0e7ee0a2.js";import"./hoist-non-react-statics-691fe6cb.js";import"./scheduler-04ce0582.js";import"./@remix-run-cb584dee.js";import"./tailwind-merge-5722ff6e.js";import"./tslib-4b8363ab.js";import"./idb-f62f60ab.js";import"./@react-leaflet-ff7df424.js";import"./prop-types-4d501b15.js";import"./stylis-581c9ed0.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();const Jt=d.div` min-h-[20rem] flex justify-center items-center bg-gray-500 text-white`,Kt=d.div`grid grid-cols-4 w-[60rem] `,A=d.div``,M=d.div` uppercase py-4 text-lg`,v=d.div`py-1`,Yt=()=>e(Jt,{children:a(Kt,{children:[a(A,{children:[e(M,{children:"StoreForm"}),e(v,{children:"About"}),e(v,{children:"Join Us"}),e(v,{children:"Membership"}),e(v,{children:"Advertise"})]}),a(A,{children:[e(M,{children:"StoreForm"}),e(v,{children:"About"}),e(v,{children:"Join Us"}),e(v,{children:"Membership"}),e(v,{children:"Advertise"})]}),a(A,{children:[e(M,{children:"StoreForm"}),e(v,{children:"About"}),e(v,{children:"Join Us"}),e(v,{children:"Membership"}),e(v,{children:"Advertise"})]}),a(A,{children:[e(M,{children:"Thanks"}),e(v,{children:e("a",{href:"https://icons8.com/",children:"ICONS8"})}),e(v,{children:"Join Us"}),e(v,{children:"Membership"}),e(v,{children:"Advertise"})]})]})}),Zt={apiKey:"AIzaSyBuXVcV4H1TkoEO9YxHoXLw0f19n3-n-Z0",authDomain:"face-local-web-front-end.firebaseapp.com",projectId:"face-local-web-front-end",storageBucket:"face-local-web-front-end.appspot.com",messagingSenderId:"959087378986",appId:"1:959087378986:web:0ccff23d77d554b3d4f953",measurementId:"G-YKCRBQQJKL"},ae=St(Zt);Ct(ae);const F=Nt(),Xt=Et(ae),ie=Pt(ae),le="users",B={name:"",createdAt:null,profileIcon:"",location:""},Pe=async(t,r,i)=>{const s=D(ie,le,t),l=r,o={};o[l]=i,await kt(s,o)},Gt=async t=>{if(F.currentUser)try{return await Lt(F.currentUser,t),!0}catch{return!1}},Qt=async t=>{try{const r=await zt(F,t.email,t.password),i=D(ie,le,r.user.uid),l=(await Ft(i)).data();return{userCredential:r,userCollection:l}}catch{return{userCollection:B,userCredential:null}}},Dt=async t=>{try{const r=await Tt(F,t.email,t.password),i=pe(),s={...B,name:t.name,createdAt:pe()};return await $t(D(ie,le,r.user.uid),s),{userCredential:r,userCollection:s}}catch{return{userCollection:B,userCredential:null}}},er=async t=>{var r;if((r=F.currentUser)!=null&&r.email){const i=It.credential(F.currentUser.email,t.oldPassword),s=await At(F.currentUser,i);return console.log(s),s.user.uid!=""}return!1},ke="userAuthInfo",ne={userCredential:null,userCollection:B},q=()=>{const t=localStorage.getItem(ke),r=JSON.parse(t);return r&&r.userCredential?{user:r,isLogin:r.uid!==""}:{user:ne,isLogin:!1}},tr=(t,r)=>{switch(r.authActionType){case 0:{if(r.payload)return JSON.stringify(r.payload),{user:{...r.payload},isLogin:!0};throw new Error("No user info in payload")}case 2:{if(r.payload)return JSON.stringify(r.payload),{user:{...r.payload},isLogin:!0};throw new Error("No user info in payload")}default:return{user:{...ne},isLogin:!1}}},rr=t=>{const[r,i]=c.useReducer(tr,t);return{state:r,dispatch:i,login:n=>i({authActionType:0,payload:n}),logout:()=>i({authActionType:1,payload:ne}),update:n=>i({authActionType:2,payload:n})}},ar={state:q(),dispatch:()=>{},login:()=>{},logout:()=>{},update:()=>{}},k=c.createContext(ar),ir=({children:t})=>e(k.Provider,{value:rr(q()),children:t}),lr=d.div` border-2 grow rounded-md pl-1 flex overflow-hidden  bg-white text-black`,nr=d.div` `,sr=()=>a(lr,{children:[e($e,{className:"my-auto "}),e("input",{type:"text",className:"grow outline-none px-3"}),e(nr,{children:e(y,{variant:"contained",children:"Search"})})]});d.div`w-[80vw] h-[80vh]`;const X={lat:44.65107,lng:-63.582687},or=({flyto:t,handleFlytoEnd:r,setFlyto:i})=>a(Ne,{style:{height:"80vh"},center:[44.65107,-63.582687],zoom:13,scrollWheelZoom:!1,children:[e(Ee,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e(dr,{flyto:t,handleFlytoEnd:r,setFlyto:i}),e(cr,{})]});function dr({flyto:t,handleFlytoEnd:r,setFlyto:i}){const[s,l]=c.useState(new fe.LatLng(X.lat,X.lng)),[o,n]=c.useState(!1),u=Rt({locationfound(f){l(f.latlng),u.flyTo(f.latlng,u.getZoom()),r(),n(!0)}});t&&u.locate();var p=new fe.Icon({iconUrl:"/vite.svg",iconSize:[20,20],iconAnchor:[10,20],popupAnchor:[0,-20]});return s===null?null:e(ee,{position:s,icon:p,draggable:!o,children:e(te,{children:a("div",{className:"flex flex-col items-center",children:[a("div",{className:" text-base pb-2",children:["Your location. ",a("span",{children:[!o&&"Not"," Auto-located!"]})]}),e(y,{fullWidth:!0,variant:"text",onClick:()=>{i(!0)},children:"Location"})]})})})}function cr(){const[t,r]=c.useState(!1),[i,s]=c.useState(X),l=c.useRef(null),o=c.useMemo(()=>({dragend(){const u=l.current;u&&s(u.getLatLng())}}),[]),n=c.useCallback(()=>{r(u=>!u)},[]);return e(ee,{draggable:t,eventHandlers:o,position:i,ref:l,children:e(te,{minWidth:90,children:a("span",{className:"flex flex-col justify-center items-center",children:[e("span",{className:"text-lg pb-1 border-b-[2px] self-stretch text-center font-mono",children:"Location"}),e(Ie,{control:e(Ae,{draggable:!0,onClick:n,sx:{fontSize:"small"}}),label:"Movable"})]})})})}const ur=[{title:"First"},{title:"Second"}],hr=d.div`flex flex-col`;function mr(){const[t,r]=c.useState(!1),[i,s]=c.useState(!1),[l,o]=c.useState("Halifax"),n=()=>{r(!1)},u=()=>{r(!t)},p=m=>{s(m)},f=()=>s(!1);return a("div",{children:[e(y,{variant:"outlined",startIcon:e(be,{}),onClick:u,children:l}),e(Me,{sx:{color:"#fff",zIndex:m=>m.zIndex.drawer+1},open:t,children:a(hr,{children:[e("div",{className:"bg-white text-black rounded-tl-md rounded-tr-md ",children:e(ye,{options:ur.map(m=>m.title),freeSolo:!0,id:"clear-on-escape",clearOnEscape:!0,renderInput:m=>a(Ue,{direction:"row",spacing:0,children:[e(z,{color:"primary","aria-label":"Search...",children:e(_e,{})}),e(I,{...m,label:"Search ...",variant:"standard"})]}),sx:{paddingX:2,paddingTop:1}})}),a("div",{className:"w-[80vw] h-[80vh] relative",children:[e("div",{className:"absolute right-[1rem] z-[1000] top-4 bg-slate-50  border-black rounded-md",children:e(pr,{handleClose:n,handleFlyto:p})}),e(or,{flyto:i,handleFlytoEnd:f,setFlyto:s}),i&&e("div",{className:"absolute z-[1001] left-1/2 top-1/2",children:e(Re,{sx:{display:"flex"},children:e(we,{color:"secondary",size:"60px"})})})]})]})})]})}const pr=({handleClose:t,handleFlyto:r})=>e(Z,{orientation:"vertical","aria-label":"map buttons",variant:"outlined",sx:{width:"100%"},children:[e(y,{sx:{paddingY:1,width:10},onClick:()=>r(!0),children:e(Oe,{fontSize:"small",color:"primary"})},"one"),e(y,{sx:{paddingY:1,width:10},onClick:t,children:e(Be,{fontSize:"small",color:"primary"})},"two")]});d.div``;const fr=({profileIcon:t,name:r})=>e(Ot,{variant:"popover",popupId:"demo-popup-menu",children:i=>a(c.Fragment,{children:[e(y,{variant:"text",...Bt(i),children:e(G,{sx:{bgcolor:We[500],width:28,height:28},src:t,children:r})}),a(Ve,{...Wt(i),children:[a(h,{onClick:i.close,children:[e(C,{to:"/user/profile",children:"Profile"})," "]}),a(h,{onClick:i.close,children:[e(C,{to:"/user/password",children:"Change Password"})," "]}),e(h,{onClick:i.close,children:"Logout"})]})]})}),gr=d.div`flex justify-center border-b-[1px] border-gray-800 `,vr=d.div`flex gap-4 justify-between  my-4  items-center`,xr=d.div`text-3xl font-satisfy font-extrabold text-blue-900 `,br=()=>e(gr,{children:a(vr,{children:[e(xr,{style:{textShadow:"#069 1px 0 10px"},children:e(C,{to:"/",children:"StoreForm - in CI/CD ing"})}),e(sr,{}),e(mr,{}),e(yr,{})]})}),yr=()=>{const t=c.useContext(k),r=()=>{t.logout()};return a("div",{children:[!t.state.isLogin&&e(V,{children:a(Z,{variant:"text","aria-label":"text button group",children:[e(y,{children:e(C,{to:"register",className:"  hover:text-purple-500 font-bold",children:"Register"})}),e(y,{children:e(C,{to:"login",className:"  hover:text-purple-500 font-bold",children:"Sign In"})})]})}),t.state.isLogin&&a(Z,{variant:"text","aria-label":"text button group",children:[e(fr,{profileIcon:t.state.user.userCollection.profileIcon,name:t.state.user.userCollection.name}),e(y,{children:e(C,{to:"/",className:"  hover:text-purple-500 ",children:e(P,{title:"Home",arrow:!0,children:e(je,{})})})}),e(y,{children:e(C,{to:"/event/post",className:"  hover:text-purple-500 ",children:e(P,{title:"Post",arrow:!0,children:e(Se,{})})})}),e(y,{onClick:r,className:"  hover:text-purple-500 ",children:e(P,{title:"Logout",arrow:!0,children:e(qe,{})})})]})]})},wr=d.div`bg-red-600 text-sm flex `,Sr=d.div`grow text-center`,Cr=d.button` mr-4 hover:text-white`,Nr=()=>{const[t,r]=c.useState(!0);return e(wr,{children:t&&a(V,{children:[e(Sr,{children:"Notification infomation"}),e(Cr,{onClick:i=>r(!1),children:"X"})]})})},Er=d.div``,Pr=()=>e(Er,{children:"ListEvent"}),kr=d.div`flex flex-col`,Lr=d.div`flex justify-center`,L=Vt(({className:t,...r})=>e(P,{...r,classes:{popper:t}}))(({theme:t})=>({[`& .${He.tooltip}`]:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:16,border:"1px solid #dadde9"}})),b=(t,r=!0)=>{let i=E(t,"yyyy / MM / dd");const s=jt(new Date,-1),l=qt(t,s);switch(l){case 0:i="Today";break;case 1:i="Tomorrow";break;default:r&&(i=`${l} days later`);break}return i},ve=({title:t="Start Time",startDate:r=new Date})=>{const i={day:0,time:ge(r)%12*2,ampm:ge(r)>12?1:0},[s,l]=S.useState(i),o=(n,u)=>{u==0&&l({...s,day:Number.parseInt(n.target.value)}),u==1&&l({...s,time:Number.parseInt(n.target.value)}),u==2&&l({...s,ampm:Number.parseInt(n.target.value)})};return a(kr,{children:[a("div",{children:[e(Je,{sx:{color:"action.active",mr:1,mb:.5}}),e("span",{className:" text-gray-600",children:t})]}),a(Lr,{children:[a(_,{variant:"standard",sx:{m:1,minWidth:120,fontSize:15,height:25},id:"demo-simple-select-standard",value:s.day.toString(),onChange:n=>o(n,0),label:"Date",className:"text-center",children:[e(h,{value:0,sx:{fontSize:15},children:e(L,{placement:"right",title:a(S.Fragment,{children:[e("div",{className:"text-gray-400",children:b(g(r,0))}),e("em",{className:"text-gray-600",children:E(g(r,0),"yyyy-MM-dd EEEE")})]}),children:e("button",{children:b(g(r,0))})})}),e(h,{value:1,sx:{fontSize:15},children:e(L,{placement:"right",title:a(S.Fragment,{children:[e("div",{className:"text-gray-400",children:b(g(r,1))}),e("em",{className:"text-gray-600",children:E(g(r,1),"yyyy-MM-dd EEEE")})]}),children:e("button",{children:b(g(r,1))})})}),e(h,{value:2,sx:{fontSize:15},children:e(L,{placement:"right",title:a(S.Fragment,{children:[e("div",{className:"text-gray-400",children:b(g(r,2))}),e("em",{className:"text-gray-600",children:E(g(r,2),"yyyy-MM-dd EEEE")})]}),children:e("button",{children:b(g(r,2),!1)})})}),e(h,{value:3,sx:{fontSize:15},children:e(L,{placement:"right",title:a(S.Fragment,{children:[e("div",{className:"text-gray-400",children:b(g(r,3))}),e("em",{className:"text-gray-600",children:E(g(r,3),"yyyy-MM-dd EEEE")})]}),children:e("button",{children:b(g(r,3),!1)})})}),e(h,{value:4,sx:{fontSize:15},children:e(L,{placement:"right",title:a(S.Fragment,{children:[e("div",{className:"text-gray-400",children:b(g(r,4))}),e("em",{className:"text-gray-600",children:E(g(r,4),"yyyy-MM-dd EEEE")})]}),children:e("button",{children:b(g(r,4),!1)})})}),e(h,{value:5,sx:{fontSize:15},children:e(L,{placement:"right",title:a(S.Fragment,{children:[e("div",{className:"text-gray-400",children:b(g(r,5))}),e("em",{className:"text-gray-600",children:E(g(r,5),"yyyy-MM-dd EEEE")})]}),children:e("button",{children:b(g(r,5),!1)})})}),e(h,{value:6,sx:{fontSize:15},children:e(L,{placement:"right",title:a("div",{children:[e("div",{className:"text-gray-400",children:b(g(r,6))}),e("em",{className:"text-gray-600",children:E(g(r,6),"yyyy-MM-dd EEEE")})]}),children:e("button",{children:b(g(r,6),!1)})})})]}),a(_,{variant:"standard",sx:{m:1,minWidth:65,fontSize:15,height:25},labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",value:s.time.toString(),onChange:n=>o(n,1),label:"Date",className:"text-center",children:[e(h,{value:0,sx:{fontSize:15},children:"0:00"}),e(h,{value:1,sx:{fontSize:15},children:"0:30"}),e(h,{value:2,sx:{fontSize:15},children:"1:00"}),e(h,{value:3,sx:{fontSize:15},children:"1:30"}),e(h,{value:4,sx:{fontSize:15},children:"2:00"}),e(h,{value:5,sx:{fontSize:15},children:"2:30"}),e(h,{value:6,sx:{fontSize:15},children:"3:00"}),e(h,{value:7,sx:{fontSize:15},children:"3:30"}),e(h,{value:8,sx:{fontSize:15},children:"4:00"}),e(h,{value:9,sx:{fontSize:15},children:"4:30"}),e(h,{value:10,sx:{fontSize:15},children:"5:00"}),e(h,{value:11,sx:{fontSize:15},children:"5:30"}),e(h,{value:12,sx:{fontSize:15},children:"6:00"}),e(h,{value:13,sx:{fontSize:15},children:"6:30"}),e(h,{value:14,sx:{fontSize:15},children:"7:00"}),e(h,{value:15,sx:{fontSize:15},children:"7:30"}),e(h,{value:16,sx:{fontSize:15},children:"8:00"}),e(h,{value:17,sx:{fontSize:15},children:"8:30"}),e(h,{value:18,sx:{fontSize:15},children:"9:00"}),e(h,{value:19,sx:{fontSize:15},children:"9:30"}),e(h,{value:20,sx:{fontSize:15},children:"10:00"}),e(h,{value:21,sx:{fontSize:15},children:"10:30"}),e(h,{value:22,sx:{fontSize:15},children:"11:00"}),e(h,{value:23,sx:{fontSize:15},children:"11:30"})]}),a(_,{variant:"standard",sx:{m:1,minWidth:50,fontSize:15,height:25},labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",value:s.ampm.toString(),onChange:n=>o(n,2),label:"Date",className:"text-center",children:[e(h,{value:0,sx:{fontSize:15},children:"AM"}),e(h,{value:1,sx:{fontSize:15},children:"PM"})]})]})]})},zr=e(Ye,{fontSize:"small"}),Fr=e(Ze,{fontSize:"small"});function Tr(){return e(ye,{multiple:!0,id:"checkboxes-tags",options:$r,disableCloseOnSelect:!0,getOptionLabel:t=>t.title,renderOption:(t,r,{selected:i})=>a("li",{...t,children:[e(Ke,{icon:zr,checkedIcon:Fr,style:{marginRight:8},checked:i}),r.title]}),style:{width:500},renderInput:t=>e(I,{...t,label:"Description tags",placeholder:""})})}const $r=[{title:"tag1",year:1994},{title:"tag2",year:1972},{title:"tag3",year:1974},{title:"aTag1",year:2008},{title:"aTag2",year:2008},{title:"aTag3",year:2008}],Ir=d.div`w-full`,Ar=({title:t,subTitles:r})=>{const[i,s]=c.useState(0);return e(Ir,{children:a(Xe,{fullWidth:!0,variant:"standard",sx:{m:1,minWidth:120,paddingRight:1},children:[e(Ge,{id:"demo-simple-select-standard-label",children:t}),e(_,{fullWidth:!0,labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",value:i,onChange:o=>{s(Number.parseInt(o.target.value))},label:"Age",sx:{textAlign:"center"},children:r.map((o,n)=>e(h,{value:n,sx:{fontSize:15},children:o},n))})]})})},Mr=d.div`mt-[-8px]`,Ur=()=>a(Mr,{children:[a(R,{sx:{display:"flex",alignItems:"flex-end"},children:[e(P,{title:"Address of the event.",arrow:!0,children:e(be,{sx:{color:"action.active",fontSize:40,pb:1}})}),e(Ar,{title:"Location",subTitles:["opt0","opt1","opt2"]})]}),e("div",{className:" mt-[-8px]",children:a(Ne,{style:{height:"20rem",width:""},center:[44.65107,-63.582687],zoom:13,scrollWheelZoom:!1,children:[e(Ee,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e(ee,{position:[44.65107,-63.582687],draggable:!0,autoPanOnFocus:!0,children:a(te,{children:["Halifax. ",e("br",{})," A beautiful city."]})})]})})]}),_r=d.div`flex justify-center items-center`,Rr=d.form`w-[35rem] border-2 my-8 min-h-[30rem] rounded-lg`,Or=d.div`m-4 text-center text-3xl font-playfair `,N=d.div`m-4`,Br=[{img:"https://images.unsplash.com/photo-1551963831-b3b1ca40c98e",title:"Breakfast"},{img:"https://images.unsplash.com/photo-1551782450-a2132b4ba21d",title:"Burger"}],Wr=()=>e(_r,{children:a(Rr,{children:[e(Or,{children:"New"}),e(N,{children:a(R,{sx:{display:"flex",alignItems:"flex-end"},children:[e(he,{sx:{color:"action.active",mr:1,mb:3.3}}),e(I,{fullWidth:!0,id:"input-with-sx",label:"Title*",variant:"standard",helperText:"Title of your post. Length: 6 - 30 characters."})]})}),e(N,{children:a(R,{sx:{display:"flex",alignItems:"flex-end"},children:[e(he,{sx:{color:"action.active",mr:1,mb:3.3}}),e(I,{fullWidth:!0,id:"input-with-sx",label:"Subtitle (optional)",variant:"standard",helperText:"More information about this post. Length: 0 - 50 characters."})]})}),a(N,{children:[a(R,{sx:{display:"flex",alignItems:"flex-end"},children:[e(Qe,{sx:{color:"action.active",mr:1,mb:4.3}}),e(Tr,{})]}),e("label",{className:"text-xs text-gray-500 pl-8",children:"Tags for this event. 1 tag at least."})]}),e(N,{children:e("div",{children:e(ve,{title:"Start Time"})})}),e(N,{children:e("div",{className:" ",children:e(ve,{title:"End Time"})})}),e(N,{children:e(Ur,{})}),a(N,{className:"flex  flex-col justify-center items-center",children:[a(z,{color:"primary","aria-label":"upload picture",component:"label",children:[e("input",{hidden:!0,accept:"image/*",type:"file"}),e(P,{title:"Upload 1 or 2 pictures about this event.",arrow:!0,children:e(De,{})})]}),e("div",{className:" w-full",children:e(et,{cols:2,children:Br.map(t=>e(tt,{children:e("img",{src:`${t.img}?w=164&h=164&fit=crop&auto=format`,srcSet:`${t.img}?w=164&h=164&fit=crop&auto=format&dpr=2 2x`,alt:t.title,loading:"lazy"})},t.img))})})]}),e(N,{children:e(y,{fullWidth:!0,variant:"contained",endIcon:e(Se,{}),children:"Submit"})})]})}),Vr=d.div`h-[20rem] bg-black bg-bg-puppy-2 bg-cover bg-no-repeat bg-center bg-blend-difference`,jr=()=>e(Vr,{}),qr=d.div``,Hr=()=>e(qr,{children:["Products","Event","Products","Event"].map((r,i)=>e(Jr,{title:r},i))}),Jr=({title:t})=>e("div",{children:t}),Kr=rt(t=>{const{expand:r,...i}=t;return e(z,{...i})})(({theme:t,expand:r})=>({transform:r?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}));function $(){const[t,r]=c.useState(!1),i=()=>{r(!t)};return a(at,{sx:{maxWidth:445},children:[e(it,{avatar:e(G,{sx:{bgcolor:lt[500]},"aria-label":"recipe",children:"R"}),action:e(z,{"aria-label":"settings",children:e(nt,{})}),title:"Best icecream with berries",subheader:"Feb 9, 2023"}),e(st,{component:"img",height:"194",image:"/images/dish-1.jpg",alt:"Paella dish"}),e(me,{children:e(T,{variant:"body2",color:"text.secondary",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolor ipsam ipsum quasi ad adipisci minus cum, enim, doloremque aliquid possimus modi ea eum optio perferendis repellendus alias quod nulla pariatur!"})}),a(ot,{disableSpacing:!0,children:[e(z,{"aria-label":"add to favorites",children:e(dt,{})}),e(z,{"aria-label":"share",children:e(ct,{})}),e(Kr,{expand:t,onClick:i,"aria-expanded":t,"aria-label":"show more",children:e(ut,{})})]}),e(ht,{in:t,timeout:"auto",unmountOnExit:!0,children:a(me,{children:[e(T,{paragraph:!0,children:"Lorem:"}),e(T,{paragraph:!0,children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Id atque minima voluptatibus voluptates, voluptatum quidem?"}),e(T,{paragraph:!0,children:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Veniam sunt sequi rem itaque quis explicabo quasi illo doloremque suscipit, pariatur, saepe odit aliquam sint laboriosam minima distinctio non, nam mollitia!"}),e(T,{paragraph:!0,children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Labore similique illo quasi voluptas ex recusandae id, ad fugiat laborum quo!"}),e(T,{children:"Lorem ipsum dolor sit amet."})]})})]})}const Yr=d.div`grid grid-cols-2 gap-4 my-8`;d.div``;const Zr=()=>a(Yr,{className:"",children:[e($,{}),e($,{}),e($,{}),e($,{}),e($,{}),e($,{})]}),Xr=d.div``,Gr=()=>e(Xr,{children:"RightSidePanel"}),Qr=d.div`h-16 m-auto`,U=d.button`w-[10rem] hover:text-red-500`,Dr=()=>e(Qr,{className:" align-middle font-satisfy text-2xl font-bold border-y-[1px] border-gray-800 ",children:a("div",{className:"flex justify-center h-full",children:[e(U,{children:"hot"}),e(U,{children:"happening"}),e(U,{children:"incoming"}),e(U,{children:"alert"})]})}),ea=d.div``,ta=d.div`grid grid-cols-10 w-4/5`,ra=()=>a(ea,{children:[e(jr,{}),e(Dr,{}),e("div",{className:"flex justify-center",children:a(ta,{children:[e(Hr,{}),e("div",{className:" col-span-8",children:e(Zr,{})}),e(Gr,{})]})})]}),aa=d.div``,ia=d.div`flex items-center`,Y=({title:t,value:r,uid:i,readonly:s,colName:l,collectionName:o})=>{const[n,u]=c.useState("");S.useState(!1);const{enqueueSnackbar:p}=Ce(),f=c.useRef(null),m=()=>{f.current&&u(f.current.value)},x=c.useContext(k);return e(aa,{children:a(ia,{children:[e("div",{className:"grow",children:e(I,{inputRef:f,fullWidth:!0,id:"standard-basic",label:t,variant:"standard",disabled:s,defaultValue:r,onChange:m})}),e("div",{className:" self-end",children:e(P,{title:s?"":"Update",sx:{opacity:s?0:100,cursor:s?"default":"pointer"},children:e(V,{children:e(y,{size:"small",onClick:()=>{Pe(i,l,n);const J=l,K=q().user,ue=K.userCollection;ue[J]=n;const Te={...K,userCollection:{...ue}};K&&x.update(Te),p("Update successfully!",{variant:"success"})},sx:{opacity:s?0:100,cursor:s?"default":"pointer"},children:e(mt,{})})})})})]})})},la=(t,r,i)=>{const s=Mt(Xt,"images/rivers.jpg"),l=Ut(s,t);l.on("state_changed",o=>{const n=o.bytesTransferred/o.totalBytes*100;i(n)},o=>{},()=>{_t(l.snapshot.ref).then(o=>{r(o)})})},na=d.div`flex justify-center items-center`,sa=d.div`border-2 my-12 w-[30rem] rounded-lg p-8 grid grid-cols-1 gap-3`,oa=d.div`text-3xl py-4`,da=()=>{var f;const[t,r]=c.useState(),[i,s]=c.useState(0),[l,o]=c.useState(""),n=m=>{m.target.files&&r(m.target.files[0])};c.useEffect(()=>{t&&la(t,o,s)},[t]);const u=c.useContext(k),p=(f=u.state.user.userCredential)==null?void 0:f.user.uid;return c.useEffect(()=>{if(l){const m="profileIcon",x=q().user,H=x.userCollection;H[m]=l;const J={...x,userCollection:{...H}};x&&u.update(J),Pe(p,"profileIcon",l)}},[l]),e(na,{children:a(sa,{children:[a("div",{className:"flex justify-center items-center",children:[e(oa,{children:"Profile"}),a(z,{color:"primary","aria-label":"upload avatar",component:"label",children:[e("input",{hidden:!0,accept:"image/*",type:"file",onChange:n}),e(P,{title:"Upload profile photo",children:a("div",{className:"relative",children:[e(G,{sx:{bgcolor:pt[500],margin:1},alt:"Avatar",src:u.state.user.userCollection.profileIcon}),i!=0&&i!=100&&e("div",{className:"absolute top-2 left-2",children:e(we,{color:"info",variant:"determinate",value:i})})]})})]})]}),e(Y,{title:"Name",value:u.state.user.userCollection.name,colName:"name",uid:p}),e(Y,{title:"Email",readonly:!0,value:u.state.user.userCredential?u.state.user.userCredential.user.email:"",colName:"email",uid:p}),e(Y,{title:"Location",value:u.state.user.userCollection.location,colName:"location",uid:p})]})})},xe=({passwordVal:t})=>{const r=[" At least 8 characters"," 1 uppercase"," 1 lowercase"," 1 symbol"," 1 number"],i=/^[A-Z]$/,s=/^[a-z]$/,l=/^[-#!$@£%^&*()_+|~=`{}\[\]:";'<>?,.\/ ]$/,o=/^[0-9]$/,n=[!1,!1,!1,!1];Array.from(t).forEach(p=>{n[0]||(n[0]=i.test(p)),n[1]||(n[1]=s.test(p)),n[2]||(n[2]=l.test(p)),n[3]||(n[3]=o.test(p))});const u=[j.isLength(t,{min:8}),...n];return e("div",{children:r.map((p,f)=>{const m=u[f]?" text-green-600":"text-red-600",x=u[f]?"✓":"✘";return a("div",{children:[a("div",{className:m,children:[x," ",p]})," "]},f)})})},ca=({passwordVal:t,rePasswordVal:r})=>{const i=["- Passwords do NOT match"],s=[t===r];return e("div",{children:i.map((l,o)=>{const n=s[o]?" text-green-600":"text-red-600",u=s[o]?"✓":"✘";return a("div",{children:[a("div",{className:n,children:[u," ",l]})," "]},o)})})},ua=t=>j.isLength(t,{max:20,min:6}),ha=t=>j.isEmail(t),Le=t=>j.isStrongPassword(t),ze=(t,r)=>t===r,ma=d.div`border-[1px] h-14 rounded-lg flex items-center justify-between p-1`,pa=d.input`grow outline-none`,se=({fieldContent:t,userInfo:r,setUserInfo:i})=>{const[s,l]=c.useState(!1),o=m=>{i(x=>t.updateField(x,m.target.value))},n=c.useRef(null),u=c.useRef(null);c.useEffect(()=>{const m=t.fieldname;n.current&&(n.current.style.position=r[m]||t.readonly?"relative":"absolute",n.current.style.fontSize=r[m]||t.readonly?"0.75rem":"1rem",n.current.style.color=r[m]||t.readonly?"gray":"black"),t.fieldname!="rePassword"?l(r[m]!=""&&!t.validateField(r[m])):l(r[m]!=""&&r.password!==r.rePassword),u.current&&t.valSet&&(u.current.value=t.valSet)},[r]);const[p,f]=c.useState(!1);return a("div",{className:"my-4 ",children:[a(ma,{children:[e(t.icon,{className:"align-middle px-1 text-gray-500",fontSize:"large"}),e("div",{className:"block grow pl-2",children:a("div",{className:"flex flex-col","aria-required":!0,children:[e("label",{className:"text-base duration-200 capitalize relative 0.75rem text-gray-600",htmlFor:t.fieldname,ref:n,children:t.fieldTitle}),e(pa,{ref:u,type:!p&&t.fieldVisibleSettable?"password":"text",required:!0,id:t.fieldname,onChange:o})]})}),t.fieldVisibleSettable&&e("div",{className:"mr-2 cursor-pointer text-gray-400",onClick:m=>f(x=>!x),children:p?e(ft,{}):e(gt,{})})]}),a(V,{children:[e("div",{className:"text-sm pl-4 pt-1  ",children:t.fieldInfo}),s&&a("div",{className:"text-sm pl-4 pt-1 text-red-600",children:[t.fieldname==="password"&&e(xe,{passwordVal:r[t.fieldname]}),t.fieldname==="oldPassword"&&e(xe,{passwordVal:r[t.fieldname]}),t.fieldname==="rePassword"&&e(ca,{passwordVal:r.password,rePasswordVal:r.rePassword}),t.fieldname!=="password"&&t.fieldname!=="rePassword"&&t.fieldname!=="oldPassword"&&t.fieldErr.map((m,x)=>e("div",{children:m},x))]})]})]})},oe={name:"",email:"",password:"",oldPassword:"",rePassword:""},fa={fieldname:"name",fieldTitle:"name",readonly:!1,valSet:"",fieldInfo:"- Name will be displayed on your profile.",fieldErr:["- Name length between 6 to 20."],fieldVisibleSettable:!1,icon:vt,updateField:(t,r)=>({...t,name:r}),validateField:ua},de={fieldname:"email",fieldTitle:"email",readonly:!1,valSet:"",fieldInfo:"- Email will be used for login.",fieldErr:["- Email address is invalid."],fieldVisibleSettable:!1,icon:xt,updateField:(t,r)=>({...t,email:r}),validateField:ha},ce={fieldname:"password",fieldTitle:"password",readonly:!1,valSet:"",fieldInfo:"",fieldErr:[],fieldVisibleSettable:!0,icon:Q,updateField:(t,r)=>({...t,password:r}),validateField:Le},ga={fieldname:"oldPassword",fieldTitle:"OLd Password",readonly:!1,valSet:"",fieldInfo:"",fieldErr:[],fieldVisibleSettable:!0,icon:Q,updateField:(t,r)=>({...t,oldPassword:r}),validateField:Le},Fe={fieldname:"rePassword",fieldTitle:"Comfirm Password",readonly:!1,valSet:"",fieldInfo:"",fieldErr:[],fieldVisibleSettable:!0,icon:Q,updateField:(t,r)=>({...t,rePassword:r}),validateField:()=>!0},O=[fa,de,ce,Fe],va=t=>!(!O[0].validateField(t.name)||!O[1].validateField(t.email)||!O[2].validateField(t.password)||!ze(t.password,t.rePassword)),xa=[de,ce],W=[{...de,readonly:!0,fieldInfo:""},ga,{...ce,fieldTitle:"New Password"},Fe],ba=t=>!(!W[1].validateField(t.oldPassword)||!W[2].validateField(t.password)||!ze(t.password,t.rePassword)),ya=d.div``,wa=d.div`my-4 mx-auto w-[45rem] border-2 rounded-lg px-6 pt-12 bg-white text-black`,Sa=()=>{const[t,r]=c.useState(oe),[i,s]=c.useState(!1),[l,o]=c.useState(!1);c.useEffect(()=>{s(ba(t))},[t]);const n=re(),u=c.useContext(k),{enqueueSnackbar:p}=Ce(),f=async()=>{if(u.state.user.userCredential){if(!await er(t)){p("Old Password Wrong!",{variant:"error"});return}await Gt(t.password)?(p("Change password successfully!",{variant:"success"}),n("/")):p("Change password fail!",{variant:"error"})}};return u.state.user.userCredential&&(W[0].valSet=u.state.user.userCredential.user.email),e(ya,{children:a(wa,{children:[e("div",{className:"text-3xl",children:"Password Change"}),W.map((m,x)=>e(se,{fieldContent:m,setUserInfo:r,userInfo:t},m.fieldname)),l&&e("div",{children:l}),e("button",{className:" disabled:text-gray-400 bg-primary-purple w-full my-2 h-12 rounded-lg text-white hover:bg-primary-purple-lighter",disabled:!i,onClick:f,children:"Change Password"})]})})},Ca=d.div`pt-4 py-4 `,Na=d.div`my-4 mx-auto w-[45rem] border-2 rounded-lg px-6 pt-12 bg-white text-black`,Ea=()=>{const[t,r]=c.useState(oe),[i,s]=c.useState(!1),[l,o]=c.useState(!1);c.useEffect(()=>{s(va(t))},[t]);const n=re(),u=c.useContext(k),p=async()=>{var m;const f=await Dt(t);(m=f.userCredential)!=null&&m.user.uid?n("/"):o(!0),u.login(f)};return e(Ca,{children:a(Na,{children:[e("div",{className:"text-3xl",children:"Register"}),O.map((f,m)=>e(se,{fieldContent:f,setUserInfo:r,userInfo:t},f.fieldname)),l&&e("div",{children:l}),a("div",{className:"text-sm text-center hover:[&>a]:text-purple-600",children:["By clicking Register, you agree to our ",e("a",{href:"",children:"Terms of Use"})," and",e("a",{href:"",children:" Privacy Policy"})]}),e("button",{className:" disabled:text-gray-400 bg-primary-purple w-full my-2 h-12 rounded-lg text-white hover:bg-primary-purple-lighter",disabled:!i,onClick:p,children:"Create Account"}),a("div",{className:"text-sm text-center mb-4",children:["Already have an account? ",e(C,{to:"/login",className:"hover:text-purple-600",children:"Sign in!"})]})]})})},Pa=d.div`py-4`,ka=d.div`py-4 mx-auto w-[45rem] border-2 rounded-lg px-6 pt-12 bg-white text-black`,La=()=>{const[t,r]=c.useState(oe),[i,s]=c.useState(!1),l=re(),o=c.useContext(k);return e(Pa,{children:e(ka,{children:a("form",{onSubmit:async u=>{var f;u.preventDefault();const p=await Qt(t);console.log("login:",p),(f=p.userCredential)!=null&&f.user?(o.login(p),l("/")):s(!0)},children:[e("div",{className:"text-3xl",children:"Login"}),xa.map((u,p)=>e(se,{fieldContent:u,setUserInfo:r,userInfo:t},u.fieldname)),i&&e("div",{className:"pl-4 pb-2 mt-[-8px] text-red-700 text-sm",children:"Email address and password combination is incorrect."}),a("div",{children:[e("label",{htmlFor:"keepsignin",className:"pl-4 align-middle block text-sm pb-4 text-blue-400",children:"Test User: 'online2jerry@gmail.com'; Pwd: '####Ab12'"}),e("input",{type:"checkbox",name:"",id:"keepsignin",className:"w-4 h-4 ml-4 align-middle"}),e("label",{htmlFor:"keepsignin",className:"pl-2 align-middle",children:"Keep me signed in"})]}),a("div",{className:"hover:[&>div>a]:text-purple-800 hover:[&>div>a]:font-bold flex text-sm pl-2",children:[e("div",{className:"p-2",children:e("a",{href:"",children:"Forgot password?"})}),e("div",{className:"p-2 ",children:e(C,{to:"/register",children:"No account? Register free."})})]}),e("button",{type:"submit",className:" bg-primary-purple w-full my-2 h-12 rounded-lg text-white hover:bg-primary-purple-lighter",children:"Login"})]})})})};function za(){const t=c.useContext(k);return console.log("len:",localStorage.length),c.useEffect(()=>{localStorage.setItem(ke,JSON.stringify(t.state.user)),console.log(t.state.user.userCollection)},[t.state]),e("div",{className:"",children:a(wt,{children:[e(Nr,{}),e(br,{}),a(Ht,{children:[a(w,{path:"/",children:[e(w,{index:!0,element:e(ra,{})}),e(w,{path:"login",element:e(La,{})}),e(w,{path:"register",element:e(Ea,{})}),e(w,{path:"user/profile",element:e(da,{})}),e(w,{path:"user/password",element:e(Sa,{})})]}),a(w,{path:"/event",children:[e(w,{index:!0,element:e(Pr,{})}),e(w,{path:"post",element:e(Wr,{})})]})]}),e(Yt,{})]})})}yt.createRoot(document.getElementById("root")).render(e(S.StrictMode,{children:e(ir,{children:e(bt,{maxSnack:3,children:e(za,{})})})}));
